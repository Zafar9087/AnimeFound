<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Found</title>
    <link rel="icon" href="Flux_Dev_Create_a_logo_on_a_bold_fire_engine_red_background_wi_2.jpeg" image>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center; 
            background: linear-gradient(135deg, #0a0f1a 0%, #11294d 100%);
            color: white;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        #navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            padding: 15px 0;
            font-size: 15px;
            font-weight: 700;
            z-index: 1000;
        }

        #content {
            flex-grow: 1;
            margin-top: 80px;
            margin-bottom: 80px;
            padding: 20px;
        }

        #anime-container {
            width: 80%;
            max-width: 600px;
            margin: auto;
            background: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 24px;
            border: 1px solid rgba(77, 166, 255, 0.2);
            padding: 20px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transform-origin: center;
        }

        img {
            width: 80%;
            border-radius: 15px;
            max-width: 350px;
            height: auto;
            object-fit: cover;
        }

        button {
            margin: 8px;
            padding: 15px 25px;
            font-size: 15px;
            cursor: pointer;
            border: 1px solid transparent;
            border-radius: 12px;
            transition: all 0.3s;
            font-weight: 700;
        }

        .watched { background-color: #28a745; color: white; border-color: #28a745; }
        .watched:hover { background-color: #218838; }
        .not-watched { background-color: #dc3545; color: white; border-color: #dc3545; }
        .not-watched:hover { background-color: #c82333; }
        .restart { background-color: #007bff; color: white; display: none; margin-top: 20px; border-color: #007bff; }
        .restart:hover { background-color: #0069d9; }

        button:active {
            filter: brightness(1.3);
        }

        #not-watched-container {
            display: none;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .anime-item {
            margin: 15px;
            text-align: center;
        }

        .anime-item img {
            width: 180px;
            height: 100px; /* Adjusted for better aspect ratio */
            object-fit: cover;
            border-radius: 8px;
        }

        #not-watched-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 20px;
            display: none;
        }

        #footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(17, 24, 39, 0.6);
            padding: 15px 0;
            text-align: center;
            font-size: 15px;
        }

        @media (max-width: 768px) {
            #anime-container { width: 90%; }
        }
    </style>
</head>
<body>
    <div id="navbar">
        Game: Have you watched this anime?
    </div>
    
    <div id="content">
        <div id="anime-container">
            <h2 id="anime-title">Loading...</h2>
            <img id="anime-image" src="" alt="Anime Image">
            <p id="anime-description">Description is loading...</p>
            <button class="watched" onclick="markAsWatched()">Watched</button>
            <button class="not-watched" onclick="markAsNotWatched()">Not Watched</button>
            <p>Lives: <span id="lives">3</span></p>
        </div>

        <div id="not-watched-title">You haven't watched these anime</div>
        <div id="not-watched-container"></div>
        <button class="restart" onclick="restartGame()">Start a new round</button>
    </div>

    <div id="footer">Â© 2025 Anime-based game</div>
     
    <script>
        const API_URL = "https://shikimori.one/api/animes";
        let lives = 3;
        let shownAnimes = new Set();
        let currentAnime = null;
        let notWatchedAnimes = []; // Array to store not-watched anime

        document.addEventListener("DOMContentLoaded", () => {
            getRandomAnime();
        });

        async function getRandomAnime() {
            try {
                const response = await fetch(`${API_URL}?order=ranked&limit=50`);
                const data = await response.json();
                const filteredAnime = data.filter(anime => 
                    !["movie", "kids", "avant_garde", "historical", "special", "ova"].includes(anime.kind) &&
                    !shownAnimes.has(anime.id)
                );
                
                if (filteredAnime.length === 0) {
                    alert("All anime have been shown!");
                    return;
                }
                
                currentAnime = filteredAnime[Math.floor(Math.random() * filteredAnime.length)];
                shownAnimes.add(currentAnime.id);
                
                document.getElementById("anime-title").textContent = currentAnime.name || currentAnime.russian;
                document.getElementById("anime-image").src = `https://shikimori.one${currentAnime.image.original}`;
                document.getElementById("anime-description").textContent = currentAnime.description || "No description available.";
            } catch (error) {
                console.error("Error loading anime:", error);
            }
        }

        function markAsWatched() {
            getRandomAnime();
        }

        function markAsNotWatched() {
            if (lives > 0) {
                lives--;
                document.getElementById("lives").textContent = lives;
                notWatchedAnimes.push(currentAnime); // Add not-watched anime to the array

                if (lives === 0) {
                    endRound();
                } else {
                    getRandomAnime();
                }
            }
        }

        function endRound() {
            // Show all not-watched anime horizontally
            const notWatchedContainer = document.getElementById("not-watched-container");
            notWatchedContainer.innerHTML = ""; // Clear container

            notWatchedAnimes.forEach(anime => {
                const animeItem = document.createElement("div");
                animeItem.classList.add("anime-item");

                const img = document.createElement("img");
                img.src = `https://shikimori.one${anime.image.original}`;
                animeItem.appendChild(img);

                const title = document.createElement("h3");
                title.textContent = anime.name || anime.russian;
                animeItem.appendChild(title);

                notWatchedContainer.appendChild(animeItem);
            });

            document.getElementById("anime-container").style.display = "none";
            document.getElementById("not-watched-title").style.display = "block";
            document.getElementById("not-watched-container").style.display = "flex";
            document.querySelector(".restart").style.display = "block";
        }

        function restartGame() {
            lives = 3;
            shownAnimes.clear();
            notWatchedAnimes = []; // Clear the array of not-watched anime
            document.getElementById("lives").textContent = lives;
            document.getElementById("anime-container").style.display = "block";
            document.getElementById("not-watched-title").style.display = "none";
            document.getElementById("not-watched-container").style.display = "none";
            document.querySelector(".restart").style.display = "none";
            getRandomAnime();
        }

      </script>
</body>
</html>